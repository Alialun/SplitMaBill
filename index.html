<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Split'ma'bill</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="stylesheet" href="css/styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>
<body>
    <div class="container">
        <h1>Split'ma'bill by Alialun</h1>

        <div class="tab-buttons">
            <button class="tab-btn" onclick="openTab('tutorial')">Tutorial ❓</button>
            <button class="tab-btn active" onclick="openTab('friends')">Friends 👥</button>
            <button class="tab-btn" onclick="openTab('import')">Import 🔱</button>
            <button class="tab-btn" onclick="openTab('split')">Split 💵</button>
            <button class="tab-btn" onclick="openTab('bills')">History 🗒️</button>
            <button class="tab-btn" onclick="openTab('settings')">Settings ⚙️</button>
        </div>

        <!-- Tutorial -->
        <div id="tutorial" class="tab-content hidden">
            <iframe width="800" height="600" src="https://www.youtube-nocookie.com/embed/kRpTqzEtz68?si=XFeSbAYLKbWzzw8C&amp;controls=1" title="YouTube video player" frameborder="1" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
        </div>

        <!-- Friends Management -->
        <div id="friends" class="tab-content">
            <h2>Friends List</h2>
            <div class="input-group">
                <input type="text" id="friendName" class="main-friend-select" placeholder="Enter Friend's Name">
                <button class="btn glass-btn" onclick="addFriend()">➕ Add</button>
            </div>
            <div id="friendsList" class="friend-list"></div>
        </div>

        <!-- Bill Splitting -->
        <div id="split" class="tab-content hidden">
            <h2>Bill Splitting</h2>
            <div class="input-group">
                <div class="custom-multiselect" id="friendSelect" onclick="toggleDropdown('friendSelect')">
                    <span class="selected-options">Split Among All</span>
                    <div class="dropdown-options hidden"></div>
                </div>                              
                <input type="text" id="itemName" placeholder="Item Name">
                <input type="number" id="itemPrice" placeholder="Price">
                <button class="btn glass-btn" onclick="addItem()">➕ Add Item</button>
            </div>

            <div id="itemsList" class="item-list"></div>
            <button class="btn glass-btn" onclick="resetSplit()">❌ Clear</button>
            <button class="btn glass-btn" onclick="calculateSplit()">✅ Complete</button>

            <h3>Final Split</h3>
            <!--<div id="finalSplit"></div>
            <div id="qrcode"></div>
            <canvas id="splitCanvas" width="500"></canvas>-->
            <img id="splitImg"></img>
        </div>
        
        <!-- Bill Import -->
        <div id="import" class="tab-content hidden">
            <h2>Direct Import</h2>
            <div class="input-group">
                <textarea id="import-area" rows="60" placeholder="Copy paste list"></textarea>
            </div>
            <button class="btn glass-btn" onclick="parseFoodoraOrder()">✅ Foodora</button>
            <button class="btn glass-btn" onclick="parseFoodoraOrderMarek()">✅ Foodora (Marek)</button>

        </div>

        <!-- Past bills Splitting -->
        <div id="bills" class="tab-content hidden">
            <h2>Past Bills</h2>
            <div id="billsList"></div>
        </div>

        
        <!-- Settings -->
        <div id="settings" class="tab-content hidden">
            <h2>Settings</h2>
            <h3>QR codes</h3>
            <span>Make sure there's enough empty space around QR codes for them to be readable by devices.</span>
            <table>
                <tr>
                    <td>
                        <h4>Revolut</h4>
                        <input type="file" id="imageInputRevolut" accept="image/*"><br>
                        <canvas id="canvasRevolut" width="200" height="200" style="border:1px solid black;"></canvas><br>
                        <button onclick="processImage('Revolut')">Update and save</button>
                    </td>
                    <td>
                        <h4>Other</h4>
                        <input type="file" id="imageInputOther" accept="image/*"><br>
                        <canvas id="canvasOther" width="200" height="200" style="border:1px solid black;"></canvas><br>
                        <button onclick="processImage('Other')">Update and save</button>
                    </td>
                </tr>
            </table>
        </div>

    </div>

</div>

    <script src="js/script.js"></script>
</body>
</html>
